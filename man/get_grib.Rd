% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/export-grib.R
\name{get_grib}
\alias{get_grib}
\title{Get GRIB2 Tidal Current Forecast}
\usage{
get_grib(
  date,
  area = "guanabara",
  resolution = 0.001,
  repo = "leoniedu/siscorar_gribs",
  fallback = TRUE,
  dest = NULL
)
}
\arguments{
\item{date}{Date object or \code{"YYYY-MM-DD"} string.}

\item{area}{Character: bay name. Default: \code{"guanabara"}.}

\item{resolution}{Numeric: grid resolution in degrees. Default: \code{0.001}.}

\item{repo}{Character: GitHub repository for cached GRIBs
(e.g., \code{"leoniedu/siscorar_gribs"}). Set to \code{NULL} to skip GitHub.}

\item{fallback}{Logical: if \code{TRUE} (default), generates the GRIB locally
when not available on GitHub (requires Wine + SISCORAR). If \code{FALSE},
fails with an error when the GRIB is not cached.}

\item{dest}{Character: local cache directory. Default uses
\code{\link[tools:userdir]{tools::R_user_dir()}}.}
}
\value{
A \code{terra::SpatRaster} with U and V sea water velocity layers.
}
\description{
Downloads a cached GRIB2 file from a GitHub release or generates one locally.
Returns the loaded raster via \code{\link[terra:rast]{terra::rast()}}.
}
\details{
The function tries three sources in order:
\enumerate{
\item Local cache (\code{dest} directory)
\item GitHub release (via \code{\link[piggyback:pb_download]{piggyback::pb_download()}})
\item Local generation via \code{\link[=predict_currents]{predict_currents()}} + \code{\link[=write_grib]{write_grib()}}
(only when \code{fallback = TRUE})
}
}
\examples{
\dontrun{
# Download from GitHub (no Wine/SISCORAR needed)
grib <- get_grib("2025-07-01", "baiatos", fallback = FALSE)
terra::plot(grib)

# Generate locally if not cached
grib <- get_grib(Sys.Date(), "guanabara")
}

}
\seealso{
\code{\link[=write_grib]{write_grib()}}, \code{\link[=predict_currents]{predict_currents()}}
}
